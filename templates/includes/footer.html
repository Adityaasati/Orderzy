{% load static %}

<footer id="footer" class="footer-style-2">
    
    <div class="footer-widget">
        <div class="container">
            <div class="row">
                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                    <div class="widget widget-newsletter">
                        <div class="widget-title">
                            <h5>For more updates, please subscribe here!</h5>
                        </div>
                        <div class="fieldset">
                            <form method="POST" id="newsletter-form">
                                {% csrf_token %}
                                <div class="field-holder">
                                    <label>
                                        <i class="icon-envelope3"></i>
                                            <input type="email" class="field-input rounded" id="email" name="email" required
                                            placeholder="Enter Your Email Address...">

                                    </label>
                                </div>
                                <div class="field-holder btn-holder">
                                    <input class="subscribe-btn bgcolor rounded" type="submit" value="Sign Up">
                                </div>
                                <p id="newsletter-message"></p>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
   
    <div class="footer-widget py-2">
        <div class="container">
            <div class="row">
                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                    <div class="widget widget-links">
                        <ul class="footer-links d-flex justify-content-center list-unstyled">
                            <li class="mx-3"><a href="{% url 'about_us' %}">About Us</a></li>
                            <li class="mx-3"><a href="{% url 'blog' %}">Blogs</a></li>
                            <li class="mx-3"><a href="{% url 'contact_us' %}">Contact Us</a></li>
                            <li class="mx-3"><a href="{% url 'privacy_policy' %}">Privacy Policy</a></li>
                            <li class="mx-3"><a href="{% url 'terms_and_conditions' %}">Terms & Conditions</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
            
    <div class="copyright-sec">
        <div class="container">
            <div class="row">
                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                    <div class="copyright-inner">
                        <div class="copy-right">
                            <p>Â© 2024 Orderzy. All Rights Reserved. Developed By <a href="#">Aditya Asati</a>
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div> <!-- /.cs-copyright -->
</footer>
<!-- Footer End -->
</div>

<script src="{% static 'js/scripts.js' %}"></script>
<script src="{% static 'js/functions.js' %}"></script>
</body>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        document.getElementById('newsletter-form').addEventListener('submit', function(e) {
            e.preventDefault();  
    
            const email = document.getElementById('email').value;
            const csrfToken = document.querySelector('[name=csrfmiddlewaretoken]').value;
            const messageElement = document.getElementById('newsletter-message');
    
            fetch("{% url 'newsletter_signup' %}", {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded',
                    'X-CSRFToken': csrfToken,
                    'X-Requested-With': 'XMLHttpRequest'  
                },
                body: new URLSearchParams({
                    'email': email
                })
            })
            .then(response => response.json())
            .then(data => {
                messageElement.textContent = data.message;
                messageElement.style.color = data.status === 'success' ? 'green' : 'red';
            })
            .catch(error => {
                messageElement.textContent = 'An error occurred. Please try again.';
                messageElement.style.color = 'red';
            });
        });
    });
    
</script>
</html>
